<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elite Coastal Seafood</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Noto+Sans+Malayalam:wght@400;500&family=Montserrat:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body { background:#fff; color:#333; font-family:'Montserrat','Noto Sans Malayalam',sans-serif; }
        h1,h2,h5 { font-family:'Playfair Display',serif; color:#0077be; }
        .hero { position:relative; background:linear-gradient(to bottom,#e0f7fa,#fff); padding:150px 0; overflow:hidden; }
        .hero::before { content:''; position:absolute; inset:0; background:url('https://img.freepik.com/free-vector/elegant-blue-water-wave-with-bubbles-background_1035-31032.jpg') center/cover; opacity:0.3; z-index:0; }
        .hero-content { position:relative; z-index:2; }
        .waves-container { position:absolute; bottom:0; width:100%; height:150px; overflow:hidden; z-index:1; }
        .wave { position:absolute; bottom:0; width:200%; height:150px; background:url("data:image/svg+xml,%3Csvg viewBox='0 0 1200 120' preserveAspectRatio='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0,0 C300,100 900,0 1200,60 L1200,120 L0,120 Z' fill='%23ffffff' opacity='0.8'/%3E%3C/svg%3E") 50% 100%; animation:wave 12s linear infinite; }
        .wave:nth-child(2) { bottom:10px; opacity:0.6; animation-duration:18s; animation-direction:reverse; }
        .wave:nth-child(3) { bottom:20px; opacity:0.4; animation-duration:24s; }
        @keyframes wave { to { transform:translateX(-50%); } }
        .product-card { background:#fff; border:1px solid #e0f7fa; border-radius:15px; box-shadow:0 10px 30px rgba(0,119,190,.1); transition:.4s; }
        .product-card:hover { transform:translateY(-10px); box-shadow:0 20px 40px rgba(0,119,190,.2); }
        .product-card img { height:300px; object-fit:cover; }
        .ocean-btn { background:#0077be; color:#fff; }
        .ocean-btn:hover { background:#005f9e; }
        .whatsapp-btn { background:#25D366; color:#fff; }
        .whatsapp-btn:hover { background:#128C7E; }
        .whatsapp-btn.disabled { background:#aaa; opacity:0.6; cursor:not-allowed; }
        .floating-cart { background:#0077be; color:#fff; }
        .price-display { color:#0077be; font-weight:bold; font-size:1.3rem; }
        .lang-toggle { position:fixed; top:20px; right:20px; z-index:1000; }
    </style>
</head>
<body>

    <!-- Language Toggle -->
    <div class="lang-toggle">
        <button class="btn btn-outline-primary me-2" onclick="setLanguage('en')">üá¨üáß English</button>
        <button class="btn btn-outline-primary" onclick="setLanguage('ml')">üáÆüá≥ ‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</button>
    </div>

    <section class="hero text-center">
        <div class="container hero-content">
            <h1 class="display-3 fw-bold" id="hero-title">Elite Coastal Seafood</h1>
            <p class="lead" id="hero-subtitle">Pristine Ocean-Fresh Premium Seafood ‚Ä¢ Sourced Daily ‚Ä¢ Delivered with Care</p>
            <a href="#products" class="btn ocean-btn btn-lg" id="hero-btn">Explore Ocean Treasures</a>
        </div>
        <div class="waves-container">
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
        </div>
    </section>

    <section id="products" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5" id="products-title">Today's Ocean-Fresh Selection</h2>
            <div class="row" id="product-grid"></div>
        </div>
    </section>

    <div class="modal fade" id="cartModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content shadow">
                <div class="modal-header border-0">
                    <h5 class="modal-title" style="color:#0077be" id="cart-title">Your Ocean Cart <span class="badge bg-primary" id="cart-count">0</span></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="cart-items"><p class="text-muted" id="cart-empty">Your cart is empty.</p></div>
                    <hr style="border-color:#e0f7fa">
                    <h5 style="color:#0077be" id="delivery-title">Delivery Details</h5>
                    <form id="customer-form" class="row g-3">
                        <div class="col-12"><label id="label-name">Full Name *</label><input type="text" class="form-control" id="customer-name" required></div>
                        <div class="col-12"><label id="label-phone">Mobile Number *</label>
                            <div class="input-group"><span class="input-group-text">+91</span><input type="tel" class="form-control" id="customer-phone" maxlength="10" pattern="[0-9]{10}" required></div>
                        </div>
                        <div class="col-12"><label id="label-place">Place / Landmark *</label><input type="text" class="form-control" id="customer-place" required></div>
                        <div class="col-12"><label id="label-road">Road / Street *</label><input type="text" class="form-control" id="customer-road" required></div>
                        <div class="col-12"><label id="label-town">Town / City *</label><input type="text" class="form-control" id="customer-town" required></div>
                        <div class="col-12"><label id="label-pin">Pin Code *</label><input type="text" class="form-control" id="customer-pin" maxlength="6" pattern="[0-9]{6}" required></div>
                        <div class="col-12">
                            <label id="label-slot">Preferred Delivery Slot *</label>
                            <select class="form-select" id="delivery-slot" required></select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-0 flex-column">
                    <h5 id="total-label">Total: ‚Çπ<span id="cart-total">0</span></h5>
                    <button class="btn whatsapp-btn btn-lg w-100 mt-3 disabled" id="whatsapp-order">
                        <i class="fab fa-whatsapp"></i> <span id="order-btn-text">Complete Order on WhatsApp</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <button class="btn floating-cart position-fixed bottom-0 end-0 m-4 rounded-circle p-3 shadow-lg" data-bs-toggle="modal" data-bs-target="#cartModal">
        <i class="fas fa-shopping-cart fa-2x"></i>
        <span class="badge bg-danger position-absolute top-0 start-100 translate-middle" id="floating-cart-count">0</span>
    </button>

    <script>
        const WA_NUMBER = "YOUR_WHATSAPP_NUMBER"; // ‚Üê Replace with your number

        const products = [
            {id:1,en:"Premium Whole Lobster",ml:"‡¥™‡µç‡¥∞‡µÄ‡¥Æ‡¥ø‡¥Ø‡¥Ç ‡¥≤‡µã‡¥¨‡µç‡¥∏‡µç‡¥±‡µç‡¥±‡µº",pricePerKg:3500,img:"https://shop.legalseafoods.com/cdn/shop/files/LiveLobstersCloseupNov24.jpg?v=1731080140&width=1920"},
            {id:2,en:"Fresh Oysters",ml:"‡¥™‡µÅ‡¥§‡¥ø‡¥Ø ‡¥ì‡¥Ø‡µç‡¥∏‡µç‡¥±‡µç‡¥±‡µá‡¥¥‡µç‡¥∏‡µç",pricePerKg:5000,img:"https://thumbs.dreamstime.com/b/fresh-oysters-ice-lemon-wedges-premium-seafood-delicacy-served-raw-fine-dining-gourmet-restaurant-experience-405945557.jpg"},
            {id:3,en:"King Prawns Jumbo",ml:"‡¥ú‡¥Ç‡¥¨‡µã ‡¥ï‡¥ø‡¥Ç‡¥ó‡µç ‡¥™‡µç‡¥∞‡µã‡µ∫‡¥∏‡µç",pricePerKg:1800,img:"https://www.citarella.com/media/catalog/product/cache/6bd6bc90948058f1c179c773d53c57be/image/154b83a/jumbo-shrimp.jpg"},
            {id:4,en:"Black Caviar",ml:"‡¥¨‡µç‡¥≤‡¥æ‡¥ï‡µç‡¥ï‡µç ‡¥ï‡¥æ‡¥µ‡¥ø‡¥Ø‡¥æ‡µº",pricePerKg:150000,img:"https://caviar.ca/wp-content/uploads/2023/06/CAVIAR.webp"},
            {id:5,en:"Wild Seer Fish Steak",ml:"‡¥µ‡µà‡µΩ‡¥°‡µç ‡¥∏‡µÄ‡µº ‡¥´‡¥ø‡¥∑‡µç ‡¥∏‡µç‡¥±‡µç‡¥±‡µÄ‡¥ï‡µç‡¥ï‡µç",pricePerKg:1200,img:"https://maplesfood.com/wp-content/uploads/2020/11/GADRE-SEER-2.jpg"},
            {id:6,en:"Blue Crab (Live)",ml:"‡¥¨‡µç‡¥≤‡µÇ ‡¥ï‡µç‡¥∞‡¥æ‡¥¨‡µç (‡¥ú‡µÄ‡¥µ‡¥®‡µã‡¥ü‡µÜ)",pricePerKg:900,img:"https://cdn.shopify.com/s/files/1/1366/4785/files/CD_1280_e_Rusty_Crabs_MBCE_21623_edited_933a5f8f-0f84-41e2-b9ae-b8fcb0599b40.jpg?v=1761306733"}
        ];

        let cart = [];
        let lang = 'en'; // default

        const translations = {
            en: {
                heroTitle: "Elite Coastal Seafood",
                heroSubtitle: "Pristine Ocean-Fresh Premium Seafood ‚Ä¢ Sourced Daily ‚Ä¢ Delivered with Care",
                heroBtn: "Explore Ocean Treasures",
                productsTitle: "Today's Ocean-Fresh Selection",
                cartTitle: "Your Ocean Cart",
                cartEmpty: "Your cart is empty.",
                deliveryTitle: "Delivery Details",
                labelName: "Full Name *",
                labelPhone: "Mobile Number *",
                labelPlace: "Place / Landmark *",
                labelRoad: "Road / Street *",
                labelTown: "Town / City *",
                labelPin: "Pin Code *",
                labelSlot: "Preferred Delivery Slot *",
                totalLabel: "Total: ‚Çπ",
                orderBtn: "Complete Order on WhatsApp",
                addToCart: "Add to Cart",
                perKg: "per kg",
                whatsappGreeting: "Good day! I wish to place an ocean-fresh order:\n\n",
                customerDetails: "Customer Details:\n",
                deliverySlot: "Delivery Slot: ",
                orderSummary: "Order Summary:\n",
                totalAmount: "Total Amount: ‚Çπ",
                thankYou: "Looking forward to your confirmation. Thank you!"
            },
            ml: {
                heroTitle: "‡¥é‡¥≤‡µà‡¥±‡µç‡¥±‡µç ‡¥ï‡µã‡¥∏‡µç‡¥±‡µç‡¥±‡µΩ ‡¥∏‡µÄ‡¥´‡µÅ‡¥°‡µç",
                heroSubtitle: "‡¥™‡µç‡¥∞‡µÄ‡¥Æ‡¥ø‡¥Ø‡¥Ç ‡¥∏‡¥Æ‡µÅ‡¥¶‡µç‡¥∞ ‡¥Æ‡¥§‡µç‡¥∏‡µç‡¥Ø‡¥ô‡µç‡¥ô‡µæ ‚Ä¢ ‡¥¶‡¥ø‡¥µ‡¥∏‡µá‡¥® ‡¥™‡µÅ‡¥§‡¥ø‡¥Ø‡¥§‡µç ‚Ä¢ ‡¥∏‡µç‡¥®‡µá‡¥π‡¥™‡µÇ‡µº‡¥µ‡¥Ç ‡¥°‡µÜ‡¥≤‡¥ø‡¥µ‡¥±‡¥ø",
                heroBtn: "‡¥∏‡¥Æ‡µÅ‡¥¶‡µç‡¥∞ ‡¥®‡¥ø‡¥ß‡¥ø‡¥ï‡µæ ‡¥ï‡¥æ‡¥£‡µÅ‡¥ï",
                productsTitle: "‡¥á‡¥®‡µç‡¥®‡¥§‡µç‡¥§‡µÜ ‡¥™‡µÅ‡¥§‡¥ø‡¥Ø ‡¥µ‡¥∞‡¥µ‡µÅ‡¥ï‡µæ",
                cartTitle: "‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥ï‡¥æ‡µº‡¥ü‡µç‡¥ü‡µç",
                cartEmpty: "‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥ï‡¥æ‡µº‡¥ü‡µç‡¥ü‡µç ‡¥∂‡µÇ‡¥®‡µç‡¥Ø‡¥Æ‡¥æ‡¥£‡µç.",
                deliveryTitle: "‡¥°‡µÜ‡¥≤‡¥ø‡¥µ‡¥±‡¥ø ‡¥µ‡¥ø‡¥∂‡¥¶‡¥æ‡¥Ç‡¥∂‡¥ô‡µç‡¥ô‡µæ",
                labelName: "‡¥™‡µÇ‡µº‡¥£‡µç‡¥£ ‡¥®‡¥æ‡¥Æ‡¥Ç *",
                labelPhone: "‡¥Æ‡µä‡¥¨‡µà‡µΩ ‡¥®‡¥Æ‡µç‡¥™‡µº *",
                labelPlace: "‡¥∏‡µç‡¥•‡¥≤‡¥Ç / ‡¥≤‡¥æ‡µª‡¥°‡µç‡¥Æ‡¥æ‡µº‡¥ï‡µç‡¥ï‡µç *",
                labelRoad: "‡¥±‡µã‡¥°‡µç / ‡¥§‡µÜ‡¥∞‡µÅ‡¥µ‡µç *",
                labelTown: "‡¥™‡¥ü‡µç‡¥ü‡¥£‡¥Ç / ‡¥®‡¥ó‡¥∞‡¥Ç *",
                labelPin: "‡¥™‡¥ø‡µª ‡¥ï‡µã‡¥°‡µç *",
                labelSlot: "‡¥á‡¥∑‡µç‡¥ü‡¥™‡µç‡¥™‡µÜ‡¥ü‡µç‡¥ü ‡¥°‡µÜ‡¥≤‡¥ø‡¥µ‡¥±‡¥ø ‡¥∏‡¥Æ‡¥Ø‡¥Ç *",
                totalLabel: "‡¥Ü‡¥ï‡µÜ ‡¥§‡µÅ‡¥ï: ‚Çπ",
                orderBtn: "‡¥µ‡¥æ‡¥ü‡µç‡¥∏‡¥æ‡¥™‡µç‡¥™‡¥ø‡µΩ ‡¥ì‡µº‡¥°‡µº ‡¥™‡µÇ‡µº‡¥§‡µç‡¥§‡¥ø‡¥Ø‡¥æ‡¥ï‡µç‡¥ï‡µÅ‡¥ï",
                addToCart: "‡¥ï‡¥æ‡µº‡¥ü‡µç‡¥ü‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç ‡¥ö‡µá‡µº‡¥ï‡µç‡¥ï‡µÅ‡¥ï",
                perKg: "/ ‡¥ï‡¥ø‡¥≤‡µã",
                whatsappGreeting: "‡¥®‡¥Æ‡¥∏‡µç‡¥ï‡¥æ‡¥∞‡¥Ç! ‡¥í‡¥∞‡µÅ ‡¥ì‡µº‡¥°‡µº ‡¥®‡µΩ‡¥ï‡¥æ‡µª ‡¥Ü‡¥ó‡µç‡¥∞‡¥π‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ:\n\n",
                customerDetails: "‡¥â‡¥™‡¥≠‡µã‡¥ï‡µç‡¥§‡µÉ ‡¥µ‡¥ø‡¥∂‡¥¶‡¥æ‡¥Ç‡¥∂‡¥ô‡µç‡¥ô‡µæ:\n",
                deliverySlot: "‡¥°‡µÜ‡¥≤‡¥ø‡¥µ‡¥±‡¥ø ‡¥∏‡¥Æ‡¥Ø‡¥Ç: ",
                orderSummary: "‡¥ì‡µº‡¥°‡µº ‡¥µ‡¥ø‡¥∂‡¥¶‡¥æ‡¥Ç‡¥∂‡¥ô‡µç‡¥ô‡µæ:\n",
                totalAmount: "‡¥Ü‡¥ï‡µÜ ‡¥§‡µÅ‡¥ï: ‚Çπ",
                thankYou: "‡¥∏‡µç‡¥•‡¥ø‡¥∞‡µÄ‡¥ï‡¥∞‡¥£‡¥§‡µç‡¥§‡¥ø‡¥®‡¥æ‡¥Ø‡¥ø ‡¥ï‡¥æ‡¥§‡µç‡¥§‡¥ø‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ. ‡¥®‡¥®‡µç‡¥¶‡¥ø!"
            }
        };

        function setLanguage(l) {
            lang = l;
            document.querySelectorAll('[id]').forEach(el => {
                const key = el.id.replace(/-/g, '');
                if (translations[lang][key]) el.textContent = translations[lang][key];
            });
            document.getElementById('hero-title').textContent = translations[lang].heroTitle;
            document.getElementById('hero-subtitle').textContent = translations[lang].heroSubtitle;
            document.getElementById('hero-btn').textContent = translations[lang].heroBtn;
            document.getElementById('products-title').textContent = translations[lang].productsTitle;
            document.getElementById('cart-empty').textContent = translations[lang].cartEmpty;
            document.getElementById('total-label').textContent = translations[lang].totalLabel;
            document.getElementById('order-btn-text').textContent = translations[lang].orderBtn;

            // Re-render products with correct language names & button
            renderProducts();
            generateDeliverySlots();
        }

        function generateDeliverySlots() {
            const slotSelect = document.getElementById('delivery-slot');
            slotSelect.innerHTML = `<option value="" disabled selected>${translations[lang].labelSlot.replace('*','')}</option>`;

            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const tomorrow = new Date(today); tomorrow.setDate(tomorrow.getDate() + 1);
            const dayAfter = new Date(today); dayAfter.setDate(dayAfter.getDate() + 2);

            const formatDate = d => d.toLocaleDateString(lang === 'ml' ? 'ml-IN' : 'en-IN', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

            const slots = [
                {label: lang==='en'?"Morning (8 AM - 12 PM)":"‡¥∞‡¥æ‡¥µ‡¥ø‡¥≤‡µÜ (8 AM - 12 PM)", start: 8},
                {label: lang==='en'?"Afternoon (12 PM - 4 PM)":"‡¥â‡¥ö‡µç‡¥ö‡¥§‡¥ø‡¥∞‡¥ø‡¥û‡µç‡¥û‡µç (12 PM - 4 PM)", start: 12},
                {label: lang==='en'?"Evening (4 PM - 8 PM)":"‡¥µ‡µà‡¥ï‡µÅ‡¥®‡µç‡¥®‡µá‡¥∞‡¥Ç (4 PM - 8 PM)", start: 16}
            ];

            const todayLabel = lang==='en'?`Today - ${formatDate(today)}`:`‡¥á‡¥®‡µç‡¥®‡µç - ${formatDate(today)}`;
            slots.forEach(s => {
                if (now.getHours() < s.start) {
                    slotSelect.innerHTML += `<option value="${todayLabel}: ${s.label}">${todayLabel}: ${s.label}</option>`;
                }
            });
            if (now.getHours() < 18) {
                const anyToday = lang==='en'?"Any Time Today":"‡¥á‡¥®‡µç‡¥®‡µç ‡¥è‡¥§‡µç ‡¥∏‡¥Æ‡¥Ø‡¥µ‡µÅ‡¥Ç";
                slotSelect.innerHTML += `<option value="${todayLabel}: ${anyToday}">${anyToday}</option>`;
            }

            ['Tomorrow', 'Day After Tomorrow'].forEach((engLabel, i) => {
                const mlLabel = i===0?'‡¥®‡¥æ‡¥≥‡µÜ':'‡¥Æ‡¥±‡µç‡¥±‡¥®‡µç‡¥®‡¥æ‡µæ';
                const label = lang==='en'?engLabel:mlLabel;
                const date = i === 0 ? tomorrow : dayAfter;
                const dateLabel = `${label} - ${formatDate(date)}`;
                slots.forEach(s => {
                    slotSelect.innerHTML += `<option value="${dateLabel}: ${s.label}">${dateLabel}: ${s.label}</option>`;
                });
                const anyLabel = lang==='en'?`Any Time (${engLabel})`:`‡¥è‡¥§‡µç ‡¥∏‡¥Æ‡¥Ø‡¥µ‡µÅ‡¥Ç (${mlLabel})`;
                slotSelect.innerHTML += `<option value="${dateLabel}: ${anyLabel}">${anyLabel}</option>`;
            });
        }

        function renderProducts() {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = '';
            products.forEach(p => {
                const card = document.createElement('div');
                card.className = 'col-md-4 mb-5';
                card.innerHTML = `
                    <div class="card product-card h-100">
                        <img src="${p.img}" class="card-img-top" alt="${p[lang]}" onerror="this.src='https://via.placeholder.com/600x400?text=No+Image'">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">${p[lang]}</h5>
                            <p class="text-muted">‚Çπ${p.pricePerKg} ${translations[lang].perKg}</p>
                            <select class="form-select mb-2" id="sel-${p.id}">
                                <option value="0.25">${lang==='en'?'250gm':'250 ‡¥ó‡µç‡¥∞‡¥æ‡¥Ç'}</option>
                                <option value="0.5">${lang==='en'?'500gm':'500 ‡¥ó‡µç‡¥∞‡¥æ‡¥Ç'}</option>
                                <option value="1" selected>${lang==='en'?'1kg':'1 ‡¥ï‡¥ø‡¥≤‡µã'}</option>
                                <option value="custom">${lang==='en'?'Custom':'‡¥á‡¥∑‡µç‡¥ü‡¥æ‡¥®‡µÅ‡¥∏‡¥∞‡¥£‡¥Ç'}</option>
                            </select>
                            <input type="number" class="form-control d-none mb-2" id="cust-${p.id}" min="0.1" step="0.05" placeholder="${lang==='en'?'e.g. 0.75':'‡¥â‡¥¶‡¥æ: 0.75'}">
                            <p class="price-display" id="price-${p.id}">‚Çπ${p.pricePerKg} ${lang==='en'?'for 1kg':'(1 ‡¥ï‡¥ø‡¥≤‡µã)'}</p>
                            <button class="btn ocean-btn mt-auto add-btn" data-id="${p.id}">${translations[lang].addToCart}</button>
                        </div>
                    </div>`;
                grid.appendChild(card);

                const sel = document.getElementById(`sel-${p.id}`);
                const cust = document.getElementById(`cust-${p.id}`);
                const priceEl = document.getElementById(`price-${p.id}`);

                const updatePrice = () => {
                    let w = sel.value === 'custom' ? (parseFloat(cust.value) || 1) : parseFloat(sel.value);
                    const price = Math.round(p.pricePerKg * w * 100) / 100;
                    const label = w===0.25?(lang==='en'?'250gm':'250 ‡¥ó‡µç‡¥∞‡¥æ‡¥Ç'):w===0.5?(lang==='en'?'500gm':'500 ‡¥ó‡µç‡¥∞‡¥æ‡¥Ç'):w===1?(lang==='en'?'1kg':'1 ‡¥ï‡¥ø‡¥≤‡µã'):`${(w*1000).toFixed(0)} ‡¥ó‡µç‡¥∞‡¥æ‡¥Ç`;
                    priceEl.textContent = `‚Çπ${price} ${lang==='en'?'for':'('}${label}${lang==='en'?'':' )'}`;
                };

                sel.onchange = () => {
                    cust.classList.toggle('d-none', sel.value !== 'custom');
                    updatePrice();
                };
                cust.oninput = updatePrice;
                updatePrice();
            });
        }

        document.addEventListener('click', e => {
            if (e.target.matches('.add-btn')) {
                const id = parseInt(e.target.dataset.id);
                const sel = document.getElementById(`sel-${id}`);
                const cust = document.getElementById(`cust-${id}`);
                let weight = sel.value === 'custom' ? parseFloat(cust.value) || 1 : parseFloat(sel.value);
                if (weight <= 0) return alert(lang==='en'?'Please select a valid quantity':'‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥∏‡¥æ‡¥ß‡µÅ‡¥µ‡¥æ‡¥Ø ‡¥Ö‡¥≥‡¥µ‡µç ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥ï');

                const p = products.find(x => x.id === id);
                const price = Math.round(p.pricePerKg * weight * 100) / 100;
                const label = weight===0.25?(lang==='en'?'250gm':'250 ‡¥ó‡µç‡¥∞‡¥æ‡¥Ç'):weight===0.5?(lang==='en'?'500gm':'500 ‡¥ó‡µç‡¥∞‡¥æ‡¥Ç'):weight===1?(lang==='en'?'1kg':'1 ‡¥ï‡¥ø‡¥≤‡µã'):`${(weight*1000).toFixed(0)} ‡¥ó‡µç‡¥∞‡¥æ‡¥Ç`;

                const existing = cart.find(i => i.id === id && i.weight === weight);
                if (existing) existing.qty++;
                else cart.push({id, name:p[lang], weight, label, price, qty:1});

                refreshCart();
            }
        });

        function remove(i) { cart.splice(i,1); refreshCart(); }

        function refreshCart() {
            const count = cart.reduce((s,i)=>s+i.qty,0);
            ['cart-count','floating-cart-count'].forEach(id => document.getElementById(id).textContent = count);

            const list = document.getElementById('cart-items');
            const totalEl = document.getElementById('cart-total');
            if (!cart.length) {
                list.innerHTML = `<p class="text-muted">${translations[lang].cartEmpty}</p>`;
                totalEl.textContent = '0';
            } else {
                let html = '<ul class="list-group list-group-flush">', total = 0;
                cart.forEach((item, i) => {
                    const sub = item.price * item.qty;
                    total += sub;
                    html += `<li class="list-group-item d-flex justify-content-between align-items-center">
                        <span>${item.name} - ${item.label} √ó ${item.qty}</span>
                        <div><span class="me-3">‚Çπ${sub}</span>
                        <button class="btn btn-sm btn-outline-danger" onclick="remove(${i})"><i class="fas fa-trash"></i></button></div>
                    </li>`;
                });
                html += '</ul>';
                list.innerHTML = html;
                totalEl.textContent = total.toFixed(2);
            }

            const form = document.getElementById('customer-form');
            const btn = document.getElementById('whatsapp-order');
            const valid = form.checkValidity() && cart.length > 0;
            btn.classList.toggle('disabled', !valid);
        }

        document.getElementById('whatsapp-order').addEventListener('click', () => {
            if (!cart.length) return alert(lang==='en'?'Your cart is empty!':'‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥ï‡¥æ‡µº‡¥ü‡µç‡¥ü‡µç ‡¥∂‡µÇ‡¥®‡µç‡¥Ø‡¥Æ‡¥æ‡¥£‡µç!');
            const form = document.getElementById('customer-form');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const get = id => document.getElementById(id).value.trim();
            const name = get('customer-name');
            const phone = '+91' + get('customer-phone');
            const place = get('customer-place');
            const road = get('customer-road');
            const town = get('customer-town');
            const pin = get('customer-pin');
            const deliverySlot = get('delivery-slot');

            let msg = translations[lang].whatsappGreeting;
            msg += translations[lang].customerDetails;
            msg += `Name: ${name}\n`;
            msg += `Mobile: ${phone}\n`;
            msg += `Address: ${place}, ${road}, ${town} - ${pin}\n`;
            msg += `${translations[lang].deliverySlot}${deliverySlot}\n\n`;
            msg += translations[lang].orderSummary;
            cart.forEach(i => msg += `‚Ä¢ ${i.qty} √ó ${i.label} ${i.name} - ‚Çπ${(i.price * i.qty).toFixed(2)}\n`);
            msg += `\n${translations[lang].totalAmount}${cart.reduce((s,i)=>s + i.price*i.qty,0).toFixed(2)}\n\n`;
            msg += translations[lang].thankYou;

            window.open(`https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(msg)}`, '_blank');
        });

        document.getElementById('cartModal').addEventListener('shown.bs.modal', () => {
            generateDeliverySlots();
            refreshCart();
        });
        document.getElementById('customer-form').addEventListener('input', refreshCart);

        // Initial render
        setLanguage('en');
        refreshCart();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
